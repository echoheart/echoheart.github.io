---
layout:     post
title:      é«˜é˜¶å‡½æ•°
subtitle:   é«˜é˜¶å‡½æ•°
date:       2019-11-13
author:     limantang
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - JavaScript
---


# é«˜é˜¶å‡½æ•°


æœ¬æ¥æƒ³æŠŠé«˜é˜¶å‡½æ•°å’Œå‡½æ•°æŸ¯é‡ŒåŒ–æ”¾åœ¨ä¸€èµ·è®¨è®ºçš„, æƒ³äº†æƒ³è¿˜æ˜¯åˆ†å¼€è®¨è®ºä¸€ä¸‹å§

## ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°

é«˜é˜¶å‡½æ•°çš„å®šä¹‰å¾ˆç®€å•
æŠŠå‡½æ•°å½“åšå‚æ•°,æˆ–è€…è¿”å›å€¼æ˜¯å‡½æ•°çš„å‡½æ•°å°±æ˜¯é«˜é˜¶å‡½æ•°

é«˜é˜¶å‡½æ•°è¿™ä¸ªæ¦‚å¿µå¾ˆç®€å•, ä¹Ÿå¾ˆå®¹æ˜“ç†è§£, ä½†æ˜¯è®²èµ·æ¥å¯èƒ½ä¼šæœ‰ä¸€äº›å›°éš¾

### é«˜é˜¶å‡½æ•°ä¸¾ä¾‹
`Array.prototype.map,`
`Array.prototype.sort,`
`Array.prototype.reduce`éƒ½æ˜¯é«˜é˜¶å‡½æ•°
è¿™ä¸ªåº”è¯¥å¾ˆå®¹æ˜“ç†è§£, å› ä¸ºå®ƒä»¬éƒ½å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°

è¯´å‡ ä¸ªå¯èƒ½æ²¡é‚£ä¹ˆå®¹æ˜“æ¥å—çš„ä¾‹å­
`Function.prototype.bind`
`Function.prototype.apply`
`Fucntion.protortype.call`
è¿™å‡ ä¸ªå¯èƒ½å°±æ²¡é‚£ä¹ˆå®¹æ˜“æ¥å—äº†ğŸ˜­
å› ä¸ºæˆ‘ä»¬å¹³æ—¶éƒ½æ˜¯è¿™æ ·ä½¿ç”¨çš„

```js
function fn() {
	console.log(this);
	console.log('this');
	console.log(this.name);
	console.log('this.nameâ€™);
	console.log(arguments);
	console.log('argumentsâ€™);
}

fn.call({name:'echo'}, 1, 2, 3)
fn.apply({name:'echo'}, [1, 2, 3])
const newFn = fn.bind({name:'echoâ€™}, 1, 2, 3)
```

å•å•åªçœ‹å‚æ•°çš„è¯ç¡®å®çœ‹ä¸å‡ºæ¥æ˜¯é«˜é˜¶å‡½æ•°, bindè¿˜å¥½å› ä¸ºæœ€åçš„è¿”å›å€¼æ˜¯å‡½æ•°, bindå¾ˆå¥½åˆ¤æ–­å‡ºå°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°
é‚£ä¹ˆcallå’Œapplyå‘¢

ä¸‹é¢ç”¨ä¸€ç‚¹ç‚¹æ•°å­¦çŸ¥è¯†, ä½¿ç”¨ä»£å…¥æ³•, çœ‹çœ‹callå’Œapplyæ˜¯ä¸æ˜¯é«˜é˜¶å‡½æ•°, æœ‰ä»€ä¹ˆä¸å¯¹çš„åˆ†æä¹‹å¤„æˆ–è€…ç–‘é—®å¯ä»¥é‚®ç®±è”ç³»æŒ‡å‡ºé—®é¢˜å“ˆğŸ˜€

å†å¼€å§‹ä¹‹å‰æœ‰ä¸€ä¸ªç‚¹éœ€è¦å¼ºè°ƒ
```js
// å‡è®¾å¦‚ä¸‹ä»£ç 
const obj = {
	method(a) {
		console.log(this);
		console.log(a);
	}
}
obj.method('a');
//	ç­‰åŒäº
obj.method.call(obj, â€˜aâ€™);
```
åŸºäºä¸Šé¢çš„ä»£ç å¼€å§‹åˆ†æ
```js
const apply = Function.prototype.apply
function fn() {
	console.log(this);
	console.log('this');
	console.log(this.name);
	console.log('this.nameâ€™);
	console.log(arguments);
	console.log('argumentsâ€™);
}
fn.apply({name: 'echoâ€™}, [1]);
// å¸¦å…¥å¯å¾—
fn.apply.call(fn, {name: 'echoâ€™}, [1])
fn.apply === Function.prototype.apply;

apply.call(fn, {name: â€˜echoâ€™}, [1]);

```
æœ€ç»ˆå¾—åˆ°äº†`apply.call(fn, {name: â€˜echoâ€™}, [1]);`å…¶ä¸­applyå°±æ˜¯
`Function.prototype.apply`

åœ¨å‰é¢è®²è§£thisçš„æ—¶å€™è¯´è¿‡å¯¹äºéç®­å¤´å‡½æ•°æ¥è¯´
**thiså…¶å®å°±æ˜¯å‡½æ•°çš„ä¸€ä¸ªéšå¼çš„å‚æ•°, å¦‚æœæƒ³è¦è‡ªå·±ä¼ å‚å°±å¿…é¡»ä½¿ç”¨call/apply/bindæ¥æŒ‡å®šè¿™ä¸ªéšå¼çš„thisæ˜¯ä»€ä¹ˆ**
æ‰€ä»¥thiså°±æ˜¯å‚æ•°

é‚£ä¹ˆä¸Šé¢å¾—åˆ°çš„`apply.call(fn, {name: â€˜echoâ€™}, [1])`ä¸å°±æ˜¯ä¸ºapplyè¿™ä¸ªå‡½æ•°ä¼ å…¥äº†`fn`è¿™ä¸ªå‡½æ•°ä½œä¸ºéšå¼çš„thiså—, 
ä¹Ÿå°±æ˜¯è¯´applyæ¥å—å‡½æ•°fnåšthis, applyç¬¦åˆé«˜é˜¶å‡½æ•°å®šä¹‰, applyå°±æ˜¯é«˜é˜¶å‡½æ•°
`apply.call(fn, {name: â€˜echoâ€™}, [1])`
ç­‰ä»·äº
`fn.apply({name: 'echo}, [1])`

æœ€ååœ¨è§£é‡Šä¸€ä¸‹`apply.call(fn, {name: â€˜echoâ€™}, [1])`è¿™ä¸ªå‡½æ•°é‡Œé¢ä¸‰ä¸ªå‚æ•°çš„æ„ä¹‰

`fn`ä½œä¸ºapplyçš„éšå¼å‚æ•°this, ä¼ é€’ç»™applyè¿™ä¸ªå‡½æ•°ä½¿ç”¨
`{name: 'echo'}`ä½œä¸ºfnè¿™ä¸ªå‡½æ•°çš„éšå¼å‚æ•°this, ä¼ é€’ç»™å‡½æ•°fnä½¿ç”¨
`[1]`è¿™ä¸ªå‚æ•°æ˜¯applyè¿™ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°, æœ€ç»ˆæ•°ç»„çš„æ¯ä¸€é¡¹ä½œä¸ºfnçš„å®å‚æ¥ä½¿ç”¨

æœ€ååœ¨ä¸¾ä¸€ä¸ªå…³äºbindç±»ä¼¼çš„ğŸŒ°

```js
const bind = Function.prototype.bind
function fn() {
	console.log(this);
	console.log('this');
	console.log(this.name);
	console.log('this.nameâ€™);
	console.log(arguments);
	console.log('argumentsâ€™);
}
const newFn = fn.bind({name: 'echoâ€™}, 1, 2);
// å¸¦å…¥å¯å¾—

fn.bind({name: 'echoâ€™}, 1, 2);
// ç­‰ä»·äº
fn.bind.call(fn, {name: 'echoâ€™}, 1, 2);

fn.bind === Function.prototype.bind;

fn.bind.call(fn, {name: 'echoâ€™}, 1, 2);
// ç­‰ä»·äº
bind.call(fn, {name: 'echoâ€™}, 1, 2);

```
åˆ†æè¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼ , æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±ç†ä¸€ç†è¿™ä¸ªè¿‡ç¨‹
